;/*FB_PKG_DELIM*/

__d("FiConsumerRiskBehaviorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6784");b=d("FalcoLoggerInternal").create("fi_consumer_risk_behavior",a);e=b;g["default"]=e}),98);
__d("XPaymentsCustomerBehaviorLoggerAsyncControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/customer_behavior_logger/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("CustomerBehaviorRiskLoggingUtils",["FBLogger","FiConsumerRiskBehaviorFalcoEvent","XAsyncRequest","XPaymentsCustomerBehaviorLoggerAsyncControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var c=b("FiConsumerRiskBehaviorFalcoEvent");c.log(function(){return a})}function a(a){var b=null;try{h(a);var d=document.location.href;b=c("XPaymentsCustomerBehaviorLoggerAsyncControllerRouteBuilder").buildUri(j(a)).toString();(a.use_case_category==="ecp_add_cc"||a.use_case_category==="ecp_edit_cc")&&(b=k(a,b,d));new(c("XAsyncRequest"))(b).setMethod("POST").setHandler(function(){}).setErrorHandler(function(b){var c,e,f;return i({client_event_unix_time_ms:(c=a.client_event_unix_time_ms)!=null?c:Date.now().toString(),consumer_behavior_event:"error_debugging_event",event_extra_data:babelHelpers["extends"]({},a.event_extra_data,{error:(c=b==null||(e=b.errorDescription)==null?void 0:e.toString())!=null?c:"",uri:d!=null?d:"unknown"}),event_id:a.event_id,falco_event:a.falco_event,html_element_name:a.html_element_name,primary_account_id:a.primary_account_id,risk_session_id:a.risk_session_id,secondary_account_id:a.secondary_account_id,upl_session_id:a.upl_session_id,uri:a.uri,use_case_category:a.use_case_category,use_case_subcategory:a.use_case_subcategory},(c=b==null||(f=b.errorDescription)==null?void 0:f.toString())!=null?c:"")}).send()}catch(a){a instanceof Error?c("FBLogger")("fi_risk_behavioral_signals").catching(a).mustfix("Error in emitCustomerBehaviorRiskEvent for URI: %s",b!=null?b:"unknown"):c("FBLogger")("fi_risk_behavioral_signals").mustfix("Error in emitCustomerBehaviorRiskEvent: %s, URI: %s",String(a),b!=null?b:"unknown")}}function i(a,b){var d=document.location.href;c("FBLogger")("fi_risk_behavioral_signals").catching(b).mustfix("Error in emitCustomerBehaviorRiskEvent for URI: %s",d!=null?d:"unknown");h(a)}function j(a){var b={consumer_behavior_event:a.consumer_behavior_event,use_case_category:a.use_case_category};a.use_case_subcategory!=null&&(b.use_case_subcategory=a.use_case_subcategory);a.primary_account_id!=null&&(b.primary_account_id=a.primary_account_id);a.secondary_account_id!=null&&(b.secondary_account_id=a.secondary_account_id);a.client_event_unix_time_ms!=null&&(b.client_event_unix_time_ms=a.client_event_unix_time_ms);a.upl_session_id!=null&&(b.upl_session_id=a.upl_session_id);a.risk_session_id!=null&&(b.risk_session_id=a.risk_session_id);a.uri!=null&&(b.uri=a.uri);a.falco_event!=null&&(b.falco_event=a.falco_event);a.html_element_name!=null&&(b.html_element_name=a.html_element_name);a.event_id!=null&&(b.event_id=a.event_id);a.event_extra_data!=null&&(b.event_extra_data=a.event_extra_data);return b}function k(a,b,d){var e=b;if(d.startsWith("https://apps.facebook.com/")||d.startsWith("https://accountscenter.facebook.com/")||new URL(d).hostname.endsWith("meta.com")){e=(a=(d=c("XPaymentsCustomerBehaviorLoggerAsyncControllerRouteBuilder").buildUri(j(a)).setProtocol("https"))==null||(d=d.setDomain("www.facebook.com"))==null?void 0:d.toString())!=null?a:b}return e}g.logCustomerBehaviorRiskEvent=h;g.emitCustomerBehaviorRiskEvent=a}),98);
__d("FiConsumerRiskBehaviorEventCategory",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BILLING_WIZARD:"billing_wizard",ECP_ADD_CC:"ecp_add_cc",ECP_EDIT_CC:"ecp_edit_cc",PAYOUT_ONBOARDING:"payout_onboarding",UNKNOWN:"unknown"});c=a;f["default"]=c}),66);
__d("FiConsumerRiskBehaviorEventType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BUTTON:"button",CLEANUP:"cleanup",CLICK:"click",ERROR_DEBUGGING_EVENT:"error_debugging_event",FOCUSIN:"focusin",FOCUSOUT:"focusout",INITIALIZATION:"initialization",PASTE:"paste",TYPING:"typing"});c=a;f["default"]=c}),66);
__d("CustomerBehaviorLoggerBase",["$InternalEnum","CustomerBehaviorRiskLoggingUtils","FBPayUPLSessionIDGenerator","isStringNullOrEmpty","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({ELAPSED_TIME_MS:"elapsed_time_ms",NUM_CHARS:"num_chars",BROWSER_TIMEZONE:"browser_timezone",INPUT_NAME_SOURCE:"input_name_source"}),i=b("$InternalEnum")({CLOSE:"close",UNLOAD:"unload"}),j="fi_consumer_risk_behavior";a=function(){function a(){var a=this;this.usePubSub=!0;this.$6=function(b){b=b.target;if(!(b instanceof HTMLInputElement))return;b=a.$5(b);a.$12(b);a.$2(babelHelpers["extends"]({},a.$3(),{consumer_behavior_event:"focusin",event_extra_data:a.getLoggerExtraData(),html_element_name:b.value}))};this.$7=function(b){var c=b.target;if(!(c instanceof HTMLInputElement))return;var d=a.$5(c);a.$12(d);a.$13(d);window.setTimeout(function(){var b=c.value.length-a.charsLogged[d.value];if(b>0){var e;a.$2(babelHelpers["extends"]({},a.$3(),{consumer_behavior_event:"paste",event_extra_data:babelHelpers["extends"]({},a.getLoggerExtraData(),(e={},e[h.NUM_CHARS]=b.toString(),e[h.INPUT_NAME_SOURCE]=d.source,e)),html_element_name:d.value}));a.charsLogged[d.value]+=b;a.inputValues[d.value]=c.value}});delete a.typingStartTimes[d.value]};this.$8=function(b){b=b.target;if(!(b instanceof HTMLInputElement))return;var c=a.$5(b);a.$12(c);b=b.value;b!==a.inputValues[c.value]&&(a.typingStartTimes[c.value]==null&&(a.typingStartTimes[c.value]=Date.now()),a.inputValues[c.value]=b)};this.$9=function(b){var c;b=b.target;if(!(b instanceof HTMLInputElement))return;b=a.$5(b);a.$13(b);a.$2(babelHelpers["extends"]({},a.$3(),{consumer_behavior_event:"focusout",event_extra_data:babelHelpers["extends"]({},a.getLoggerExtraData(),(c={},c[h.INPUT_NAME_SOURCE]=b.source,c)),html_element_name:b.value}));delete a.typingStartTimes[b.value]};this.$10=function(b){var c;b=b.target;if(!(b instanceof HTMLInputElement))return;var d=a.$5(b);a.$2(babelHelpers["extends"]({},a.$3(),{consumer_behavior_event:"click",event_extra_data:babelHelpers["extends"]({},a.getLoggerExtraData(),(c={},c[h.INPUT_NAME_SOURCE]=d.source,c.tagName=b.tagName.toLowerCase(),c)),html_element_name:d.value}))};this.$11=function(b){b.preventDefault(),b.returnValue="true",a.$14(i.UNLOAD)};this.$12=function(b){a.charsLogged[b.value]==null&&(a.charsLogged[b.value]=0),a.inputValues[b.value]==null&&(a.inputValues[b.value]="")};this.uplSessionID=d("FBPayUPLSessionIDGenerator").sessionIDGenerator();this.inputValues={};this.typingStartTimes={};this.charsLogged={};this.loggedEventTypes=new Set()}var b=a.prototype;b.init=function(a){var b;this.sessionStartTime=Date.now();a.uplSessionID!=null&&(this.uplSessionID=a.uplSessionID);this.flowSessionID==null&&(this.flowSessionID=a.flowSessionID);this.secondary_account_id=a.businessID;this.primary_account_id=a.paymentAccountID;this.uri=(a=a.uri)!=null?a:document.location.href;this.uri==null&&this.$1("Unable to get required fields during initialization");this.$2(babelHelpers["extends"]({},this.$3(),{consumer_behavior_event:"initialization",event_extra_data:babelHelpers["extends"]({},this.getLoggerExtraData(),(a={},a[h.BROWSER_TIMEZONE]=(b=Intl.DateTimeFormat().resolvedOptions().timeZone)!=null?b:"",a))}));this.$4()};b.$5=function(a){var b=a.getAttribute("name");if(!c("isStringNullOrEmpty")(b))return{source:"name",value:b};b=a.getAttribute("data-testid");if(!c("isStringNullOrEmpty")(b))return{source:"data-testid",value:b};b=a.getAttribute("data-autocomplete");return!c("isStringNullOrEmpty")(b)?{source:"data-autocomplete",value:b}:a.id?{source:"id",value:a.id}:{source:"unknown",value:"unknown"}};b.$3=function(){return{client_event_unix_time_ms:Date.now().toString(),event_id:c("uuidv4")(),falco_event:j,primary_account_id:this.primary_account_id,risk_session_id:this.flowSessionID,secondary_account_id:this.secondary_account_id,upl_session_id:this.uplSessionID,uri:this.uri,use_case_category:this.getUseCaseCategory(),use_case_subcategory:this.getUseCaseSubcategory()}};b.shouldLog=function(){return!0};b.getUseCaseCategory=function(){return"unknown"};b.getUseCaseSubcategory=function(){return null};b.getLoggerExtraData=function(){return{}};b.$4=function(){document.addEventListener("focusin",this.$6),document.addEventListener("paste",this.$7),document.addEventListener("keyup",this.$8),document.addEventListener("focusout",this.$9),document.addEventListener("click",this.$10),window.addEventListener("beforeunload",this.$11)};b.cleanup=function(){document.removeEventListener("focusin",this.$6),document.removeEventListener("paste",this.$7),document.removeEventListener("keyup",this.$8),document.removeEventListener("focusout",this.$9),document.removeEventListener("click",this.$10),window.removeEventListener("beforeunload",this.$11),this.$14(i.CLOSE),this.inputValues={},this.typingStartTimes={},this.charsLogged={},this.flowSessionID=null,this.sessionStartTime=null,this.loggedEventTypes=new Set()};b.logButtonClick=function(a){this.uri==null?this.$1("Invalid button event",a):this.$2(babelHelpers["extends"]({},this.$3(),{consumer_behavior_event:"button",event_extra_data:this.getLoggerExtraData(),html_element_name:a.value}))};b.$1=function(a,b){this.$2(babelHelpers["extends"]({},this.$3(),{consumer_behavior_event:"error_debugging_event",event_extra_data:babelHelpers["extends"]({},this.getLoggerExtraData(),(a={chars_logged:JSON.stringify(this.charsLogged),errorMessage:a,typing_start_times:JSON.stringify(this.typingStartTimes)},a[h.INPUT_NAME_SOURCE]=b==null?void 0:b.source,a)),html_element_name:b==null?void 0:b.value}))};b.$13=function(a){var b=this.inputValues[a.value].length-this.charsLogged[a.value],c=this.typingStartTimes[a.value];isNaN(b)&&this.$1("Invalid typing event",a);if(b!==0&&c!=null){var d;this.$2(babelHelpers["extends"]({},this.$3(),{consumer_behavior_event:"typing",event_extra_data:babelHelpers["extends"]({},this.getLoggerExtraData(),(d={},d[h.ELAPSED_TIME_MS]=(Date.now()-c).toString(),d[h.NUM_CHARS]=b.toString(),d[h.INPUT_NAME_SOURCE]=a.source,d)),html_element_name:a.value}));this.charsLogged[a.value]+=b}};b.$14=function(a){if(this.shouldLog()){var b;b=babelHelpers["extends"]({},this.getLoggerExtraData(),{source:a,startTime:(b=(b=this.sessionStartTime)==null?void 0:b.toString())!=null?b:""});var c=this.getUseCaseCategory()!=="billing_wizard"&&this.loggedEventTypes.size<=1&&this.loggedEventTypes.has("initialization");if(this.sessionStartTime!=null&&a===i.CLOSE&&!c){a=this.sessionStartTime;c=Date.now()-a;b[h.ELAPSED_TIME_MS]=c<0?Number.MAX_SAFE_INTEGER.toString():c.toString()}this.$2(babelHelpers["extends"]({},this.$3(),{consumer_behavior_event:"cleanup",event_extra_data:b}))}};b.$2=function(a){a.consumer_behavior_event!=null&&this.loggedEventTypes.add(a.consumer_behavior_event),this.usePubSub?d("CustomerBehaviorRiskLoggingUtils").emitCustomerBehaviorRiskEvent(a):d("CustomerBehaviorRiskLoggingUtils").logCustomerBehaviorRiskEvent(a)};return a}();g.CustomerBehaviorLoggerBase=a}),98);
__d("BillingWizardCustomerBehaviorLoggerImpl",["CustomerBehaviorLoggerBase"],(function(a,b,c,d,e,f,g){"use strict";var h="Close",i="Save",j="Back";a=function(a){function b(b){var c;b===void 0&&(b=null);c=a.call(this)||this;c.$BillingWizardCustomerBehaviorLoggerImpl$p_1=function(a){a=a.target;if(a instanceof HTMLElement){var b=a.closest('[aria-label="'+h+'"]');b&&c.logButtonClick({source:"aria-label",value:h});b=a.closest('[aria-label="'+i+'"]');b&&c.logButtonClick({source:"aria-label",value:i});b=a.closest('[aria-label="'+j+'"]');b&&c.logButtonClick({source:"aria-label",value:j})}};c.wizardFilters=b;return c}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.shouldLog=function(){return this.wizardFilters==null||this.wizardFilters.includes(this.wizardName)?!0:!1};c.initialize=function(b){this.wizardName=b.wizardName;if(!this.shouldLog())return;a.prototype.init.call(this,{businessID:b.businessID,flowSessionID:b.flowSessionID,paymentAccountID:b.paymentAccountID,uplSessionID:b.uplSessionID,uri:b.uri});this.initBillingWizardListeners()};c.initBillingWizardListeners=function(){document.addEventListener("click",this.$BillingWizardCustomerBehaviorLoggerImpl$p_1)};c.getUseCaseCategory=function(){return"billing_wizard"};c.getUseCaseSubcategory=function(){return this.wizardName};c.getUsePubSub=function(){return this.usePubSub};c.setUsePubSub=function(a){this.usePubSub=a};c.cleanup=function(){a.prototype.cleanup.call(this),document.removeEventListener("click",this.$BillingWizardCustomerBehaviorLoggerImpl$p_1)};return b}(d("CustomerBehaviorLoggerBase").CustomerBehaviorLoggerBase);g.BillingWizardCustomerBehaviorLoggerImpl=a}),98);
__d("BillingWizardCustomerBehaviorLogger",["BillingWizardCustomerBehaviorLoggerImpl"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){return a.apply(this,arguments)||this}babelHelpers.inheritsLoose(b,a);return b}(d("BillingWizardCustomerBehaviorLoggerImpl").BillingWizardCustomerBehaviorLoggerImpl);b=new a(["ADD_PM","ADD_PM_BM","ADD_PM_NUX","ADD_PM_NUX_EP","ADD_PM_PUX","ADD_PM_PUX_EP"]);c=b;g["default"]=c}),98);